# Node.js based URL Shortener

An Express.js-based API that lets you generate, update, access, delete, and analyze short aliases for long URLs, all while storing mappings and analytics in-memory.

---

## Features

- Shorten URLs with optional custom alias and TTL
- Redirection endpoint to retrieve long URL from alias
- CRUD for aliases: update, delete, retrieve
- Basic access analytics (count and access timestamps)
- Automatic expiration and cleanup of aliases using TTL
- Lightweight in-memory storage (no external DB dependency)

---

## Installation

1. Clone the repository:
    ```
    git clone <your-repo-url>
    cd <your-folder>
    ```
2. Install dependencies:
    ```
    npm install
    ```

3. Start the server:
    ```
    npm start
    ```
    The server will run on `http://localhost:3000` (or the port set in `PORT` env variable).

---

## API Usage

All endpoints are under the `/url` path. Data is stored in-memory and will reset on server restart.

### Shorten a URL

**POST** `/url/shorten`

- JSON body:
    ```
    {
      "long_url": "https://example.com/some/very/long/url",
      "ttl": 60000,              // optional, ms; default 2 min
      "alias": "custom123"       // optional, autogenerated if absent
    }
    ```
- Response: alias details with expiration info

### Access a Shortened URL

**GET** `/url/:alias`

- Returns redirection data for the long URL (status 302)
- Increments access count and logs access timestamp

### Delete an Alias

**DELETE** `/url/:alias`

- Deletes alias and associated analytics

### Update Alias or TTL

**PATCH** `/url/:alias`

- JSON body:
    ```
    { 
      "custom_alias": "newalias", // optional, for alias change
      "ttl": 300000               // optional, to set new TTL
    }
    ```
- Updates alias or TTL; ensures uniqueness for custom_alias

### Get Analytics

**GET** `/url/:alias/analytics`

- Returns last 10 access timestamps and access count for alias

---

## Expiration & Cleanup

- Expired aliases are deleted every minute by a background cron job
- If accessed after TTL, an error is returned

---

## Testing API with Postman

You can use [Postman](https://www.postman.com/) to interact with the API. Below are steps and field examples for each supported endpoint.

---

### Shorten a URL

- **Method:** POST
- **URL:** `http://localhost:3000/url/shorten`
- **Body:**  
  Select **raw** and choose **JSON** format.  
  Example:
{
"long_url": "https://mysite.com",
"ttl": 120000,
"alias": "customAlias"
}

---

### Access a Shortened URL

- **Method:** GET
- **URL:** `http://localhost:3000/url/{alias}`  
Replace `{alias}` with your custom or generated alias.

---

### Delete an Alias

- **Method:** DELETE
- **URL:** `http://localhost:3000/url/{alias}`  
Replace `{alias}` with the alias you want to delete.

---

### Update Alias or TTL

- **Method:** PATCH
- **URL:** `http://localhost:3000/url/{alias}`  
Replace `{alias}` with the alias you want to update.
- **Body:**  
Select **raw** and choose **JSON** format.  
Example:
{
"custom_alias": "newalias",
"ttl": 300000
}

---

### Get Analytics for an Alias

- **Method:** GET
- **URL:** `http://localhost:3000/url/{alias}/analytics`  
Replace `{alias}` with the alias you want analytics for.

---
